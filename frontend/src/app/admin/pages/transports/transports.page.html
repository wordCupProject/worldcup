<!-- transports.page.html - Template corrigé -->
<ion-content class="bg-gray-50 min-h-screen p-6">
  
  <!-- FORMULAIRE D'AJOUT -->
  <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
    <h1 class="text-2xl font-bold text-dark mb-6">Ajouter un Transport</h1>
    
    <form (ngSubmit)="addTransport()" #transportFormRef="ngForm">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <!-- Type de transport - CORRIGÉ -->
        <div>
          <label class="block text-gray-700 mb-2">Type</label>
          <select 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.type" 
            name="type" 
            required>
            <option value="">-- Sélectionner --</option>
            <option *ngFor="let type of transportTypes" [value]="type.value">
              {{ type.icon }} {{ type.label }}
            </option>
          </select>
        </div>

        <!-- Compagnie -->
        <div>
          <label class="block text-gray-700 mb-2">Compagnie</label>
          <input 
            type="text" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.compagnie" 
            name="compagnie" 
            placeholder="Ex: Royal Air Maroc"
            required>
        </div>

        <!-- Ville de départ -->
        <div>
          <label class="block text-gray-700 mb-2">Ville de départ</label>
          <input 
            type="text" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.departureCity" 
            name="departureCity" 
            placeholder="Ex: Casablanca"
            required>
        </div>

        <!-- Ville d'arrivée -->
        <div>
          <label class="block text-gray-700 mb-2">Ville d'arrivée</label>
          <input 
            type="text" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.arrivalCity" 
            name="arrivalCity" 
            placeholder="Ex: Marrakech"
            required>
        </div>

        <!-- Heure de départ -->
        <div>
          <label class="block text-gray-700 mb-2">Heure de départ</label>
          <input 
            type="datetime-local" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.departureTime" 
            name="departureTime" 
            required>
        </div>

        <!-- Heure d'arrivée -->
        <div>
          <label class="block text-gray-700 mb-2">Heure d'arrivée</label>
          <input 
            type="datetime-local" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.arrivalTime" 
            name="arrivalTime" 
            required>
        </div>

        <!-- Capacité -->
        <div>
          <label class="block text-gray-700 mb-2">Capacité</label>
          <input 
            type="number" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.capacite" 
            name="capacite" 
            min="1" 
            max="500"
            required>
        </div>

        <!-- Prix -->
        <div>
          <label class="block text-gray-700 mb-2">Prix (MAD)</label>
          <input 
            type="number" 
            class="w-full px-4 py-2 border rounded-lg" 
            [(ngModel)]="transportForm.price" 
            name="price" 
            min="0" 
            step="0.01"
            required>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="flex justify-end space-x-4 mt-6">
        <button 
          type="button" 
          (click)="resetForm()"
          class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition">
          Réinitialiser
        </button>
        <button 
          type="submit" 
          [disabled]="!transportFormRef.valid"
          class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition disabled:bg-gray-300">
          Ajouter Transport
        </button>
      </div>
    </form>
  </div>

  <!-- SECTION TRANSPORTS EXISTANTS - NOUVELLE -->
  <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
    <h2 class="text-xl font-bold text-dark mb-4">Transports Existants</h2>
    
    <div *ngIf="transports.length === 0" class="text-center py-8">
      <p class="text-gray-500">Aucun transport ajouté pour le moment</p>
    </div>

    <div *ngIf="transports.length > 0" class="space-y-4">
      <div 
        *ngFor="let transport of transports" 
        class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
        
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <span class="text-2xl">{{ getTransportIcon(transport.type) }}</span>
            <div>
              <h3 class="font-semibold text-gray-900">
                {{ getTransportTypeLabel(transport.type) }} - {{ transport.compagnie }}
              </h3>
              <p class="text-sm text-gray-600">
                {{ transport.departureCity }} → {{ transport.arrivalCity }}
              </p>
            </div>
          </div>
          
          <div class="flex items-center space-x-2">
            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">
              {{ transport.place }}/{{ transport.capacite }} places
            </span>
            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">
              {{ formatPrice(transport.price) }}
            </span>
          </div>
        </div>
        
        <div class="mt-3 flex items-center justify-between">
          <div class="text-sm text-gray-500">
            <span>Départ: {{ formatDisplayDate(transport.departureTime) }}</span>
            <span class="mx-2">•</span>
            <span>Arrivée: {{ formatDisplayDate(transport.arrivalTime) }}</span>
          </div>
          
          <div class="flex space-x-2">
            <button 
              (click)="viewTransport(transport)"
              class="p-2 text-blue-500 hover:bg-blue-50 rounded-full"
              title="Voir détails">
              <ion-icon name="eye-outline"></ion-icon>
            </button>
            <button 
              (click)="editTransport(transport)"
              class="p-2 text-green-500 hover:bg-green-50 rounded-full"
              title="Modifier">
              <ion-icon name="create-outline"></ion-icon>
            </button>
            <button 
              (click)="deleteTransport(transport)"
              class="p-2 text-red-500 hover:bg-red-50 rounded-full"
              title="Supprimer">
              <ion-icon name="trash-outline"></ion-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

</ion-content>